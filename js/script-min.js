"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),Game=function(){function t(e){_classCallCheck(this,t),this.canvas=document.getElementById(e),this.ctx=this.canvas.getContext("2d"),this.gameSize={x:this.canvas.width,y:this.canvas.height},this.player=new Player(this.gameSize,this.collisions),this.ball=new Ball(this.gameSize),this.bricks=this.drawBricks(),this.lives=3,this.score=0,this.collisions=new CollisionDetection(this.ball,this.player,this.gameSize,this.bricks)}return _createClass(t,[{key:"drawRect",value:function t(e,i){this.ctx.clearRect(0,0,this.gameSize.x,this.gameSize.y),this.ctx.fillRect(e.center.x-e.size.x/2,e.center.y-e.size.y/2,e.size.x,e.size.y),this.ctx.fillRect(i.center.x-i.size.x/2,i.center.y-i.size.y/2,i.size.x,i.size.y);for(var s=0;s<this.bricks.length;s++)this.ctx.fillRect(this.bricks[s].center.x-this.bricks[s].size.x/2,this.bricks[s].center.y-this.bricks[s].size.y/2,this.bricks[s].size.x,this.bricks[s].size.y)}},{key:"drawBricks",value:function t(){for(var e=[],i=0;i<540;i++){var s=22+i%20*24,n=40+i%27*10;e.push(new Brick({x:s,y:n}))}return e}},{key:"filterBricks",value:function t(){var e=this;this.bricks=this.bricks.filter(function(t){return!e.collisions.brickHit(t)})}},{key:"update",value:function t(){this.filterBricks(),this.player.update(),this.collisions.brickCollision(this.bricks),this.ball.update(this.collisions)}},{key:"draw",value:function t(){this.drawRect(this.player,this.ball)}},{key:"play",value:function t(){this.update(),this.draw()}},{key:"playGame",value:function t(){var e=this;setInterval(function(){return e.play()},10)}}]),t}(),Player=function(){function t(e){_classCallCheck(this,t),this.size={x:100,y:10},this.center={x:e.x/2,y:e.y-2},this.input=new Input}return _createClass(t,[{key:"update",value:function t(){this.input.keyboardPress(this.input.key.left)?this.center.x-=4:this.input.keyboardPress(this.input.key.right)&&(this.center.x+=4)}},{key:"printSide",value:function t(){this.input.keyboardPress(this.input.key.left)}}]),t}(),Input=function(){function t(){_classCallCheck(this,t),this.keyState={},this.key={left:37,right:39,space:32}}return _createClass(t,[{key:"keyboardPress",value:function t(e){var i=this;return window.onkeydown=function(t){i.keyState[t.keyCode]=!0},window.onkeyup=function(t){i.keyState[t.keyCode]=!1},!0===this.keyState[e]}}]),t}(),Ball=function(){function t(e,i){_classCallCheck(this,t),this.gameSize=e,this.size={x:6,y:6},this.center={x:250,y:450},this.velocity={x:2,y:-2}}return _createClass(t,[{key:"moveBall",value:function t(){this.center.x+=this.velocity.x,this.center.y+=this.velocity.y}},{key:"update",value:function t(e){e.hitWall()&&(this.velocity.x=-this.velocity.x),e.hitCeiling()&&(this.velocity.y=-this.velocity.y),e.ballHit()&&(this.velocity.y=-this.velocity.y);var i=this;e.bricks.forEach(function(t){e.brickHit(t)&&(this.velocity.y=-this.velocity.y)}),this.moveBall()}}]),t}(),Brick=function t(e){_classCallCheck(this,t),this.size={x:20,y:7},this.center=e},CollisionDetection=function(){function t(e,i,s,n){_classCallCheck(this,t),this.ball=e,this.player=i,this.gameSize=s,this.bricks=n}return _createClass(t,[{key:"ballHit",value:function t(){var e=this.ball.size.x/2;return this.ball.center.y==this.gameSize.y&&this.player.center.x-this.player.size.x/2<this.ball.center.x&&this.ball.center.x<this.player.center.x+this.player.size.x/2}},{key:"hitWall",value:function t(){var e=this.ball.size.x/2;return this.ball.center.x>this.gameSize.x-e||this.ball.center.x<e}},{key:"hitCeiling",value:function t(){var e=this.ball.size.x/2;return this.ball.center.y<e}},{key:"brickHit",value:function t(e){var i=e.center.x-e.size.x/2,s=e.center.y-e.size.y/2;return this.ball.center.x>i&&this.ball.center.x<i+e.size.x&&this.ball.center.y>s&&this.ball.center.y<s+e.size.y}},{key:"brickCollision",value:function t(){this.bricks.forEach(function(t){})}}]),t}();window.onload=function(){new Game("screen").playGame()};