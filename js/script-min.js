"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),Game=function(){function e(t){_classCallCheck(this,e),this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.gameSize={x:this.canvas.width,y:this.canvas.height},this.player=new Player(this.gameSize,this.collisions),this.ball=new Ball(this.gameSize),this.bricks=this.drawBricks(),this.lives=3,this.score=0,this.collisions=new CollisionDetection(this.ball,this.player,this.gameSize)}return _createClass(e,[{key:"drawRect",value:function e(t,i){this.ctx.clearRect(0,0,this.gameSize.x,this.gameSize.y),this.ctx.fillRect(t.center.x-t.size.x/2,t.center.y-t.size.y/2,t.size.x,t.size.y),this.ctx.fillRect(i.center.x-i.size.x/2,i.center.y-i.size.y/2,i.size.x,i.size.y);for(var s=0;s<this.bricks.length;s++)this.ctx.fillRect(this.bricks[s].center.x-this.bricks[s].size.x/2,this.bricks[s].center.y-this.bricks[s].size.y/2,this.bricks[s].size.x,this.bricks[s].size.y)}},{key:"drawBricks",value:function e(){for(var t=[],i=0;i<540;i++){var s=22+i%20*24,n=40+i%27*10;t.push(new Brick({x:s,y:n}))}return t}},{key:"filterBricks",value:function e(){var t=this;this.bricks=this.bricks.filter(function(e){return!t.collisions.brickHit(e)})}},{key:"update",value:function e(){this.filterBricks(),this.player.update(),this.ball.update(this.collisions)}},{key:"draw",value:function e(){this.drawRect(this.player,this.ball)}},{key:"play",value:function e(){this.update(),this.draw()}},{key:"playGame",value:function e(){setInterval(this.play.bind(this),10)}}]),e}(),Player=function(){function e(t){_classCallCheck(this,e),this.size={x:100,y:10},this.center={x:t.x/2,y:t.y-2},this.input=new Input}return _createClass(e,[{key:"update",value:function e(){this.input.keyboardPress(this.input.key.left)?this.center.x-=4:this.input.keyboardPress(this.input.key.right)&&(this.center.x+=4)}},{key:"printSide",value:function e(){this.input.keyboardPress(this.input.key.left)}}]),e}(),Input=function(){function e(){_classCallCheck(this,e),this.keyState={},this.key={left:37,right:39,space:32}}return _createClass(e,[{key:"keyboardPress",value:function e(t){var i=this;return window.onkeydown=function(e){i.keyState[e.keyCode]=!0},window.onkeyup=function(e){i.keyState[e.keyCode]=!1},!0===this.keyState[t]}}]),e}(),Ball=function(){function e(t,i){_classCallCheck(this,e),this.gameSize=t,this.size={x:6,y:6},this.center={x:250,y:450},this.velocity={x:2,y:-2}}return _createClass(e,[{key:"moveBall",value:function e(){this.center.x+=this.velocity.x,this.center.y+=this.velocity.y}},{key:"update",value:function e(t){t.hitWall()&&(console.log("hitWall"),this.velocity.x=-this.velocity.x),t.hitCeiling()&&(console.log("hitCeiling"),this.velocity.y=-this.velocity.y),this.moveBall()}}]),e}(),Brick=function e(t){_classCallCheck(this,e),this.size={x:20,y:7},this.center=t},CollisionDetection=function(){function e(t,i,s){_classCallCheck(this,e),this.ball=t,this.player=i,this.gameSize=s}return _createClass(e,[{key:"hitWall",value:function e(){var t=this.ball.size.x/2;return this.ball.center.x>this.gameSize.x-t||this.ball.center.x<t}},{key:"hitCeiling",value:function e(){var t=this.ball.size.x/2;return this.ball.center.y<t}},{key:"brickHit",value:function e(t){var i=t.center.x-t.size.x/2,s=t.center.y-t.size.y/2;return this.ball.center.x>i&&this.ball.center.x<i+t.size.x&&this.ball.center.y>s&&this.ball.center.y<s+t.size.y}}]),e}();window.onload=function(){new Game("screen").playGame()};